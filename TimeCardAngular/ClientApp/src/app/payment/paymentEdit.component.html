
<form id="formPayment" autocomplete="off">
  <div *ngIf="selectedJobId != 0" class="card mt-3">
    <div class="card-header">
      <div class="form-group row">
        <div class="col-md-2">@(Model.SelectedJob?.Client)</div>
        <div class="col-md-2">@(Model.SelectedJob?.Project)</div>
        <div class="col-md-2">@(Model.SelectedJob?.BillTypeDescr)</div>
      </div>
    </div>
    <div class="card-body" id="divEdit" [ngClass]="editPayment.payId == 0 ? 'bg-success': 'bg-info'" *ngIf="canEdit">
      <div class="form-group form-row">
        <div class="col-md-1 col-form-label text-right">Date</div>
        <div class="col-md-2">
          <input asp-for="EditPayment.PayDate" class="form-control" type="date" />
        </div>
        <div class="col-md-1 col-form-label text-right">Amount</div>

        <div class="col-md-2"><input [(ngModel)]="editPayment.hours" type = "number" min = "0" max = "400" step = "0.25" class="form-control"/></div>
        <div class="col-md-1 col-form-label text-right">Check #</div>
        <div class="col-md-2"><input [(ngModel)]="editPayment.checkNo" class = "form-control" type = "number" maxlength = "5" /></div>
        <div class="col-md-3 text-right">
          <button class="btn btn-default fa fa-2x fa-plus edit-button" type="button" id="btnAdd" title="Add" style="display:none;"></button>
          <button class="btn btn-default fa fa-2x fa-times edit-button cancel" style="display:none;" value="Delete" title="Delete" type="button"></button>
          <button class="btn btn-default fa fa-2x fa-check" value="Save" title="Save" type="button"></button>
        </div>
      </div>
      <div *ngIf="timeCardsUnpaid != null" class="form-group form-row">
        <div class="col-md-2 offset-5 col-form-label text-right">Work Period</div>
        <div class="col-md-2">
          <select [(ngModel)]="editPayment.workDay" class="form-control">
            <option *ngFor="let unpaid of timecardsUnpaid" value="{{unpaid.id}}">{{unpaid.amount}}</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  <div class="row mt-3" style="max-height:450px; overflow-y:auto; position:relative;">
    <div class="col-md-12">
      <table class="table table-sm table-striped table-hover">
        <thead class="sticky">
          <tr>
            <th style="width:15%;">Date</th>
            <th class="text-right" style="width:15%;">Hours</th>
            <th style="width:15%;">Check No.</th>
            <th>{{jobIsTimeCard ? "Work Period" : ""}}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let payment of payments" class="payment-row">
            <td style="width:15%;">{{payment.PayDate}}</td>
            <td style="width:15%;" class="text-right">{{payment.Hours}}</td>
            <td style="width:15%;">{{payment.CheckNo}}</td>
            <td>{{WorkDate(Model.JobIsTimeCard ? payment.WorkDay : 0)}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</form>

